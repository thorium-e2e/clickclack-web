language: java

branches:
  only:
  - master

deploy:
  provider: heroku
  api_key: 3a12d835-fb52-4977-946b-7a0c30a0bad5
  app:
    master: rec-clickclack-web
    production: clickclack-web

jobs:
  include:
    - stage: build heroku rec app
      script:
        echo "buidling heroku rec application"
    - stage: run tests on rec app
      script:
        - cd tests/selenium
        - mvn clean
        - mvn test -pl selenium-regression-tests
    - stage: report test results
      script: echo "report test results"
    - stage: deploy heroku prod app
      script:
        - echo "deploy heroku prod app"

notifications:
  slack:
    on_success: always